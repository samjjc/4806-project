<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>User</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<tbody>
    <h1 th:text="${user.name}"></h1>
    <form th:action="'/follow/'+${user.name}" method="post" th:unless="${viewer.getFollowing().contains(user)}">
        <button type="submit">
            Follow
        </button>
    </form>

    <form th:action="'/unfollow/'+${user.name}" method="post" th:if="${viewer.getFollowing().contains(user)}">
        <button type="submit">
            Unfollow
        </button>
    </form>

    <h3>Following:</h3>
    <tr class="row" th:unless="${user.following.isEmpty()}" th:each="followee : ${user.following}">
        <td class="row-user" ><a th:href="'/user/'+${followee.name}"><span th:text="${followee.name}"></span></a></td><br/>
    </tr>
    <h3>Reviews:</h3>
    <tr class="row" th:unless="${user.reviews.isEmpty()}" th:each="review : ${user.reviews}">
        <td class="row-user" th:text="${review.getUser() != null} ? ${review.getUser().getName()} : 'Unknown'"></td>
        <td class="row-rating" th:text="${review.getRating()}"></td>
        <td class="row-text" th:text="${review.getText()}"></td>
    </tr>
</html>